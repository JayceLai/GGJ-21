System.register("chunks:///_virtual/ContactPointHelper.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var n,t,i,e,r,a,l,s,c,f,u,p,_,h;return{setters:[function(o){n=o.defineProperty,t=o.inheritsLoose,i=o.assertThisInitialized},function(o){e=o.cclegacy,r=o._decorator,a=o.Quat,l=o.loader,s=o.Prefab,c=o.Node,f=o.game,u=o.ColliderComponent,p=o.Vec3,_=o.instantiate,h=o.Component}],execute:function(){var d,C,g;e._RF.push({},"276fcld+b5O8qjGJZTPQFke","ContactPointHelper",void 0);var v=r.ccclass,y=(r.property,r.menu),P=new a;o("ContactPointHelper",v("COMMON.ContactPointHelper")(d=y("common/ContactPointHelper")((g=C=function(o){function e(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=o.call.apply(o,[this].concat(r))||this,n(i(t),"_entityMap",new Map),t}t(e,o);var r=e.prototype;return r.__preload=function(){null!=e._point||1&e._flag||(e._flag|=1,l.loadRes("common/prefabs/Point",s,(function(){for(var o=arguments.length,n=new Array(o),t=0;t<o;t++)n[t]=arguments[t];n&&(n[0]?console.error(n[0]):e._point=n[1])}))),null!=e._arrow||2&e._flag||(e._flag|=2,l.loadRes("common/prefabs/Arrow",s,(function(){for(var o=arguments.length,n=new Array(o),t=0;t<o;t++)n[t]=arguments[t];n&&(n[0]?console.error(n[0]):e._arrow=n[1])}))),null==e._container&&(e._container=new c("__CONTACT_POINT__"),f.addPersistRootNode(e._container))},r.onLoad=function(){e._insArr.push(this)},r.onEnable=function(){var o=this.getComponents(u),n=this;o.forEach((function(o){o.on("onCollisionEnter",n.onCollision,n),o.on("onCollisionStay",n.onCollision,n),o.on("onCollisionExit",n.onCollision,n)}))},r.onDisable=function(){var o=this.getComponents(u),n=this;o.forEach((function(o){o.off("onCollisionEnter",n.onCollision,n),o.off("onCollisionStay",n.onCollision,n),o.off("onCollisionExit",n.onCollision,n)}))},r.onCollision=function(o){if(e._point&&e._arrow){this._entityMap.has(o.otherCollider.uuid)||this._entityMap.set(o.otherCollider.uuid,{pt:[],aw:[]});var n=this._entityMap.get(o.otherCollider.uuid);n.pt.forEach((function(o){o.active=!1})),n.aw.forEach((function(o){o.active=!1})),o.contacts.forEach((function(o,t){var i,r,l=new p,s=new p;o.isBodyA?(o.getWorldPointOnA(l),o.getWorldNormalOnB(s)):(o.getWorldPointOnB(l),o.getWorldNormalOnA(s)),n.pt.length>t?(i=n.pt[t],r=n.aw[t],i.active=!0,r.active=!0):((i=_(e._point)).setWorldScale(.25,.25,.25),i.setParent(e._container),(r=_(e._arrow)).setParent(e._container),n.pt.push(i),n.aw.push(r)),i.setWorldPosition(l),r.setWorldPosition(l),a.rotationTo(P,p.UNIT_Z,s),r.setWorldRotation(P)}))}},r.onDestroy=function(){var o=e._insArr.indexOf(this);o>=0&&e._insArr.splice(o,1),this._entityMap.forEach((function(o){o.pt.forEach((function(o){o.removeFromParent(),o.destroy()})),o.aw.forEach((function(o){o.removeFromParent(),o.destroy()}))}))},e}(h),n(C,"_point",null),n(C,"_arrow",null),n(C,"_flag",0),n(C,"_insArr",[]),n(C,"_container",null),d=g))||d)||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/RigidCharacterTest.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./RigidCharacter.ts"],(function(t){"use strict";var e,i,n,a,r,s,o,h,c,u,_,l,p,f,m,d,y,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.defineProperty},function(t){s=t.cclegacy,o=t._decorator,h=t.SystemEvent,c=t.Quat,u=t.Vec3,_=t.Animation,l=t.Node,p=t.Vec2,f=t.systemEvent,m=t.macro,d=t.clamp,y=t.Component},function(t){g=t.RigidCharacter}],execute:function(){var C,T,w,b,E,R,A,K,S,v,D,F,k,O,Y,J,z,G;s._RF.push({},"2f54f4Nux1Jwb11ViTNgGqn","RigidCharacterTest",void 0);var P,U=o.ccclass,M=o.property,j=o.menu,X=h.EventType;!function(t){t[t.CT_MOVE=1]="CT_MOVE",t[t.CT_ROTATE=2]="CT_ROTATE",t[t.CT_JUMP=4]="CT_JUMP",t[t.CT_RUN=8]="CT_RUN",t[t.CT_RUSH=16]="CT_RUSH"}(P||(P={}));var Z=new c,N=new u;t("RigidCharacterTest",(C=U("Character.RigidCharacterTest"),T=j("demo/character/RigidCharacterTest"),w=M(_),b=M(g),E=M({type:l}),R=M({type:l}),C(A=T((S=e((K=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,n(a(e),"animation",S,a(e)),n(a(e),"character",v,a(e)),n(a(e),"currentOrient",D,a(e)),n(a(e),"targetOrient",F,a(e)),n(a(e),"rotateFactor",k,a(e)),n(a(e),"rotateEnable",O,a(e)),n(a(e),"inverseXZ",Y,a(e)),n(a(e),"speed",J,a(e)),n(a(e),"decayRate",z,a(e)),n(a(e),"jumpRate",G,a(e)),r(a(e),"_constraint",0),r(a(e),"_jumping",!1),r(a(e),"_walking",!1),r(a(e),"_running",!1),r(a(e),"_stateX",0),r(a(e),"_stateZ",0),r(a(e),"_isShiftDown",!1),r(a(e),"_isAltDown",!1),r(a(e),"_isSpaceDown",!1),r(a(e),"_speed",0),r(a(e),"_startAccelerationTime",0),r(a(e),"_JumpRefreshTime",0),e}i(e,t);var s=e.prototype;return s.onEnable=function(){f.on(X.KEY_DOWN,this.onKeyDown,this),f.on(X.KEY_UP,this.onKeyUp,this)},s.onDisable=function(){f.off(X.KEY_DOWN,this.onKeyDown,this),f.off(X.KEY_UP,this.onKeyUp,this)},s.onKeyDown=function(t){t.keyCode==m.KEY.w?this._stateZ=1:t.keyCode==m.KEY.s?this._stateZ=-1:t.keyCode==m.KEY.a?this._stateX=1:t.keyCode==m.KEY.d?this._stateX=-1:t.keyCode==m.KEY.space?this._isSpaceDown=!0:t.keyCode==m.KEY.shift?this._isShiftDown=!0:t.keyCode==m.KEY.alt&&(this._isAltDown=!0)},s.onKeyUp=function(t){t.keyCode==m.KEY.w||t.keyCode==m.KEY.s?this._stateZ=0:t.keyCode==m.KEY.d||t.keyCode==m.KEY.a?this._stateX=0:t.keyCode==m.KEY.space?this._isSpaceDown=!1:t.keyCode==m.KEY.shift?this._isShiftDown=!1:t.keyCode==m.KEY.alt&&(this._isAltDown=!1)},s.update=function(t){this.updateCharacter(1e3/60),this._isSpaceDown=!1},s.updateCharacter=function(t){if(this.character.updateFunction(t),this.character.onGround&&(this._JumpRefreshTime-=t,this._JumpRefreshTime<0&&(this._jumping&&(this._constraint=0),this._jumping=!1,this._JumpRefreshTime=0)),this._constraint&P.CT_JUMP||!this._isSpaceDown||(this.character.jump(0),this._jumping=!0,this._JumpRefreshTime=this.jumpRate,this._constraint|=P.CT_JUMP+P.CT_RUN+P.CT_ROTATE),this.rotateEnable&&!(this._constraint&P.CT_ROTATE||this._isAltDown)){var e=this.currentOrient.rotation,i=this.targetOrient.rotation;c.equals(e,i)||(c.slerp(Z,e,i,this.rotateFactor),this.currentOrient.worldRotation=Z)}if(this._stateX||this._stateZ)if(this.inverseXZ?N.set(this._stateZ,0,-this._stateX):N.set(this._stateX,0,this._stateZ),N.normalize(),N.negative(),this.rotateEnable){this.targetOrient.forward=N,N.set(this.currentOrient.forward),N.negative();var n=this.currentOrient.rotation,a=this.targetOrient.rotation,r=d(this.rotationScalar(n,a),0,1);this._constraint&P.CT_RUN?this._constraint&P.CT_MOVE||(this._speed=this.speed.x):this._speed=this.speed.y,this.character.move(N,this._speed*r)}else this.character.move(N,this._speed);else this._speed-=this.decayRate,this._walking=!1,this._running=!1},s.rotationScalar=function(t,e){return Math.abs(t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w)},s.updateAnimation=function(t){if(this._jumping){var e=this.animation.getState("FG_Jump_Start_A"),i=this.animation.getState("FG_Jump_MidAir_A");e.isPlaying||i.isPlaying||this.playAnim("FG_Jump_Start_A","FG_Jump_MidAir_A")}else{if(this.character.onGround)if(this._speed>0)if(this._speed<this.speed.x)this.animation.getState("FG_Walk_A").isPlaying||this.animation.crossFade("FG_Walk_A");else this.animation.getState("FG_Run_A").isPlaying||this.animation.crossFade("FG_Run_A");else this.animation.getState("FG_Idle_A").isPlaying||this.animation.crossFade("FG_Idle_A");else if(!this._jumping)this.animation.getState("FG_Jump_MidAir_A").isPlaying||this.animation.play("FG_Jump_MidAir_A")}},s.playAnim=function(t,e){var i=this;this.animation.play(t),this.animation.once(_.EventType.LASTFRAME,(function(){i.animation.play(e)}),this)},s.onClickJump=function(){this._isSpaceDown=!0},e}(y)).prototype,"animation",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(K.prototype,"character",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(K.prototype,"currentOrient",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(K.prototype,"targetOrient",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(K.prototype,"rotateFactor",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),O=e(K.prototype,"rotateEnable",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y=e(K.prototype,"inverseXZ",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),J=e(K.prototype,"speed",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),z=e(K.prototype,"decayRate",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.025}}),G=e(K.prototype,"jumpRate",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),A=K))||A)||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/RigidCharacter.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,n,o,r,a,l,s,c,u,h,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty,n=t.inheritsLoose,o=t.assertThisInitialized,r=t.defineProperty,a=t.createClass},function(t){l=t.cclegacy,s=t._decorator,c=t.Vec3,u=t.RigidBody,h=t.Collider,p=t.Component}],execute:function(){var d,g,y,m,f,_,C,b,v,w,B,P,S,R,z,L,V;l._RF.push({},"596fbIiY9ZBDI5y66x8iDSP","RigidCharacter",void 0);var x=s.ccclass,A=s.property,D=s.requireComponent,j=s.menu,F=new c,N=(new c,function(){function t(){r(this,"point",new c),r(this,"normal",new c)}return t.prototype.assign=function(t,i){return t.isBodyA?(t.getWorldNormalOnB(this.normal),t.getWorldPointOnA(this.point)):(t.getWorldNormalOnA(this.normal),t.getWorldPointOnB(this.point)),this.collider=i,this},t}()),I=[],M=function(){function t(){}return t.getContacts=function(t,i,e){for(var n=0;n<t.length;n++)e.push(this.getContact(t[n],i))},t.getContact=function(t,i){return(I.length>0?I.pop():new N).assign(t,i)},t.recyContacts=function(t){var i;(i=Array.prototype.push).call.apply(i,[I].concat(t)),t.length=0},t}(),k=x("Character.JumpParam")((y=i((g=function(){e(this,"perpRatio",y,this),e(this,"steepPerpRatio",m,this),e(this,"height",f,this),e(this,"maxHeight",_,this)}).prototype,"perpRatio",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=i(g.prototype,"steepPerpRatio",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=i(g.prototype,"height",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=i(g.prototype,"maxHeight",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),d=g))||d;t("RigidCharacter",(C=x("Character.RigidCharacter"),b=j("demo/character/RigidCharacter"),v=D(u),w=A(k),C(B=b(B=v((S=i((P=function(t){function i(){for(var i,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return i=t.call.apply(t,[this].concat(a))||this,e(o(i),"maxSpeed",S,o(i)),e(o(i),"damping",R,o(i)),e(o(i),"slopeLimit",z,o(i)),e(o(i),"gravity",L,o(i)),e(o(i),"jumpParam",V,o(i)),r(o(i),"_rigidBody",null),r(o(i),"_collider",null),r(o(i),"_grounded",!0),r(o(i),"_toSteep",!1),r(o(i),"_contacts",[]),r(o(i),"_groundContact",null),r(o(i),"_groundNormal",c.UP.clone()),r(o(i),"_velocity",new c),r(o(i),"_jumpDir",new c),i}n(i,t);var l=i.prototype;return l.start=function(){this._rigidBody=this.getComponent(u),this._collider=this.getComponent(h),this._collider.on("onCollisionEnter",this.onCollision,this),this._collider.on("onCollisionStay",this.onCollision,this),this._collider.on("onCollisionExit",this.onCollision,this)},l.move=function(t,i){this._rigidBody.getLinearVelocity(F);var e=F.y;c.scaleAndAdd(F,F,t,i),F.y=0;var n=this.maxSpeed;F.lengthSqr()>n&&(F.normalize(),F.multiplyScalar(n)),F.y=e,this._rigidBody.setLinearVelocity(F.multiply(this._rigidBody.linearFactor))},l.jump=function(t){var i=this.jumpParam,e=this._jumpDir;this.toSteep?c.lerp(e,c.UP,this._groundNormal,i.steepPerpRatio):c.lerp(e,c.UP,this._groundNormal,i.perpRatio);var n=this.calculateJumpVerticalSpeed(i.height+(i.maxHeight-i.height)*t);this._rigidBody.getLinearVelocity(F),c.scaleAndAdd(F,F,e,n),this._rigidBody.setLinearVelocity(F.multiply(this._rigidBody.linearFactor))},l.rush=function(){},l.updateFunction=function(t){this.updateContactInfo(),this.applyGravity(),this.applyDamping(),this.saveState()},l.applyDamping=function(t){void 0===t&&(t=1/60),this.damping&&(this._rigidBody.getLinearVelocity(F),F.multiplyScalar(Math.pow(1-this.damping,t)),this._rigidBody.setLinearVelocity(F.multiply(this._rigidBody.linearFactor)))},l.applyGravity=function(){var t=this.gravity,i=this._rigidBody.mass;F.set(0,i*t,0),this._rigidBody.applyForce(F)},l.saveState=function(){this._rigidBody.getLinearVelocity(this._velocity)},l.updateContactInfo=function(){this._grounded=!1,this._groundContact=null;for(var t=this.node.worldPosition,i=-.001,e=0;e<this._contacts.length;e++){var n=this._contacts[e],o=n.normal,r=n.point;o.y<=1e-4||o.y>i&&r.y<t.y-.25&&(this._grounded=!0,i=o.y,this._groundContact=n)}this._grounded?(c.copy(this._groundNormal,this._groundContact.normal),this._toSteep=this._groundContact.normal.y<=Math.cos(this.slopeLimit*Math.PI/180)):(c.copy(this._groundNormal,c.UP),this._toSteep=!1),M.recyContacts(this._contacts)},l.calculateJumpVerticalSpeed=function(t){return Math.sqrt(2*t*Math.abs(this.gravity))},l.onCollision=function(t){M.getContacts(t.contacts,t.selfCollider,this._contacts)},a(i,[{key:"onGround",get:function(){return this._grounded}},{key:"velocity",get:function(){return this._velocity}},{key:"toSteep",get:function(){return this._toSteep}}]),i}(p)).prototype,"maxSpeed",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),R=i(P.prototype,"damping",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),z=i(P.prototype,"slopeLimit",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),L=i(P.prototype,"gravity",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-20}}),V=i(P.prototype,"jumpParam",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new k}}),B=P))||B)||B)||B));l._RF.pop()}}}));

System.register("chunks:///_virtual/AxisHelper.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var i,e,r,s,t,o,a,c,l;return{setters:[function(n){i=n.defineProperty,e=n.inheritsLoose,r=n.assertThisInitialized},function(n){s=n.cclegacy,t=n._decorator,o=n.loader,a=n.Prefab,c=n.instantiate,l=n.Component}],execute:function(){var u,_,h;s._RF.push({},"5bb94205NtNprcLIythUQv4","AxisHelper",void 0);var p=t.ccclass,f=(t.property,t.menu);n("AxisHelper",p("COMMON.AxisHelper")(u=f("common/AxisHelper")((h=_=function(n){function s(){for(var e,s=arguments.length,t=new Array(s),o=0;o<s;o++)t[o]=arguments[o];return e=n.call.apply(n,[this].concat(t))||this,i(r(e),"_ins",null),e}e(s,n);var t=s.prototype;return t.__preload=function(){null==s._axis&&o.loadRes("common/prefabs/Axis",a,(function(){for(var n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];i&&(i[0]?console.error(i[0]):(s._axis=i[1],s._insArr.forEach((function(n){!n._ins&&n.enabled&&n.enabledInHierarchy&&n.node.active&&n.node.activeInHierarchy&&n.onEnable()}))))}))},t.onLoad=function(){s._insArr.push(this)},t.onEnable=function(){s._axis&&(null==this._ins&&(this._ins=c(s._axis),this.node.addChild(this._ins)),this._ins.active=!0)},t.onDisable=function(){this._ins&&(this._ins.active=!1)},t.onDestroy=function(){var n=s._insArr.indexOf(this);n>=0&&s._insArr.splice(n,1)},s}(l),i(_,"_axis",null),i(_,"_insArr",[]),u=h))||u)||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/StairsGenerator.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,n,o,a,i,l,c,d,s,u,p,f;return{setters:[function(e){r=e.defineProperty,t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.createClass,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){l=e.cclegacy,c=e._decorator,d=e.Prefab,s=e.loader,u=e.instantiate,p=e.Vec3,f=e.Component}],execute:function(){var h,g,_,y,b,v,w,m;l._RF.push({},"80ac5t9IotBIKCUyj3wfdGN","StairsGenerator",void 0);var z=c.ccclass,C=c.property;e("StairsGenerator",(h=z("StairsGenerator"),g=C(d),h((m=w=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return r=e.call.apply(e,[this].concat(n))||this,a(i(r),"count",b,i(r)),a(i(r),"prefab",v,i(r)),r}n(r,e);var t=r.prototype;return t.__preload=function(){var e=r;null!==e._ladder||1&e._flag||(e._flag|=1,s.loadRes(e.url,d,(function(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];t&&(t[0]?console.error(t[0]):(e._ladder=t[1],e._onloaded&&(e._onloaded.forEach((function(r){r(e._ladder)})),e._onloaded.length=0)))})))},t.start=function(){0==this.node.children.length&&(r._ladder?this.generator(r._ladder):r._onloaded.push(this.generator.bind(this)))},t.generator=function(e){for(var r=e.data.scale,t=0;t<this.count;t++){var n=u(e);this.node.addChild(n);var o=t+1;n.position=new p(0,r.y/2*(o+t),r.z/2*(o+t))}},o(r,[{key:"generate",get:function(){return this.node.destroyAllChildren(),0==this.node.children.length&&this.prefab,!1},set:function(e){}}]),r}(f),r(w,"url","common/prefabs/Ladder"),r(w,"_flag",0),r(w,"_ladder",null),r(w,"_onloaded",[]),b=t((y=m).prototype,"count",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),v=t(y.prototype,"prefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(y.prototype,"generate",[C],Object.getOwnPropertyDescriptor(y.prototype,"generate"),y.prototype),_=y))||_));l._RF.pop()}}}));

System.register("chunks:///_virtual/first-person-camera.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,i,n,s,r,a,c,h,d,y,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,s=e.defineProperty},function(e){r=e.cclegacy,a=e._decorator,c=e.math,h=e.macro,d=e.systemEvent,y=e.SystemEvent,l=e.Component}],execute:function(){var u,p,f,v,C,_,E,m,S;r._RF.push({},"83969PIqqtCzpmwWOBT+ujw","first-person-camera",void 0);var k=a.ccclass,w=a.property,T=a.menu,z=new c.Vec2,b=new c.Vec2,A=new c.Vec3,x=new c.Quat,V=new c.Vec3(0,0,1),g="W".charCodeAt(0),D="S".charCodeAt(0),M="A".charCodeAt(0),O="D".charCodeAt(0),K="Q".charCodeAt(0),P="E".charCodeAt(0),U="w".charCodeAt(0),W="s".charCodeAt(0),L="a".charCodeAt(0),H="d".charCodeAt(0),Q="q".charCodeAt(0),Y="e".charCodeAt(0),F=h.KEY.shift;e("FirstPersonCamera",(u=k("COMMON.FirstPersonCamera"),p=T("common/FirstPersonCamera"),f=w({slide:!0,range:[.05,.5,.01]}),u(v=p((_=t((C=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(n(t),"moveSpeed",_,n(t)),i(n(t),"moveSpeedShiftScale",E,n(t)),i(n(t),"damp",m,n(t)),i(n(t),"rotateSpeed",S,n(t)),s(n(t),"_euler",new c.Vec3),s(n(t),"_velocity",new c.Vec3),s(n(t),"_position",new c.Vec3),s(n(t),"_speedScale",1),t}o(t,e);var a=t.prototype;return a.onLoad=function(){c.Vec3.copy(this._euler,this.node.eulerAngles),c.Vec3.copy(this._position,this.node.position)},a.onDestroy=function(){this._removeEvents()},a.onEnable=function(){this._addEvents()},a.onDisable=function(){this._removeEvents()},a.update=function(e){c.Vec3.transformQuat(A,this._velocity,this.node.rotation),c.Vec3.scaleAndAdd(this._position,this._position,A,this.moveSpeed*this._speedScale),c.Vec3.lerp(A,this.node.position,this._position,e/this.damp),this.node.setPosition(A),c.Quat.fromEuler(x,this._euler.x,this._euler.y,this._euler.z),c.Quat.slerp(x,this.node.rotation,x,e/this.damp),this.node.setRotation(x)},a._addEvents=function(){d.on(y.EventType.MOUSE_WHEEL,this.onMouseWheel,this),d.on(y.EventType.KEY_DOWN,this.onKeyDown,this),d.on(y.EventType.KEY_UP,this.onKeyUp,this),d.on(y.EventType.TOUCH_MOVE,this.onTouchMove,this),d.on(y.EventType.TOUCH_END,this.onTouchEnd,this)},a._removeEvents=function(){d.off(y.EventType.MOUSE_WHEEL,this.onMouseWheel,this),d.off(y.EventType.KEY_DOWN,this.onKeyDown,this),d.off(y.EventType.KEY_UP,this.onKeyUp,this),d.off(y.EventType.TOUCH_MOVE,this.onTouchMove,this),d.off(y.EventType.TOUCH_END,this.onTouchEnd,this)},a.onMouseWheel=function(e){var t=-e.getScrollY()*this.moveSpeed/24;c.Vec3.transformQuat(A,V,this.node.rotation),c.Vec3.scaleAndAdd(A,this.node.position,A,t),this.node.setPosition(A)},a.onKeyDown=function(e){var t=this._velocity;e.keyCode===F?this._speedScale=this.moveSpeedShiftScale:e.keyCode===g||e.keyCode===U?0===t.z&&(t.z=-1):e.keyCode===D||e.keyCode===W?0===t.z&&(t.z=1):e.keyCode===M||e.keyCode===L?0===t.x&&(t.x=-1):e.keyCode===O||e.keyCode===H?0===t.x&&(t.x=1):e.keyCode===K||e.keyCode===Q?0===t.y&&(t.y=-1):e.keyCode!==P&&e.keyCode!==Y||0===t.y&&(t.y=1)},a.onKeyUp=function(e){var t=this._velocity;e.keyCode===F?this._speedScale=1:e.keyCode===g||e.keyCode===U?t.z<0&&(t.z=0):e.keyCode===D||e.keyCode===W?t.z>0&&(t.z=0):e.keyCode===M||e.keyCode===L?t.x<0&&(t.x=0):e.keyCode===O||e.keyCode===H?t.x>0&&(t.x=0):e.keyCode===K||e.keyCode===Q?t.y<0&&(t.y=0):e.keyCode!==P&&e.keyCode!==Y||t.y>0&&(t.y=0)},a.onTouchMove=function(e){e.getStartLocation(z),z.x>.4*r.winSize.width?(e.getDelta(b),this._euler.y-=.5*b.x,this._euler.x+=.5*b.y):(e.getLocation(b),c.Vec2.subtract(b,b,z),this._velocity.x=.01*b.x,this._velocity.z=.01*-b.y)},a.onTouchEnd=function(e){e.getStartLocation(z),z.x<.4*r.winSize.width&&(this._velocity.x=0,this._velocity.z=0)},a.changeEnable=function(){this.enabled=!this.enabled},t}(l)).prototype,"moveSpeed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),E=t(C.prototype,"moveSpeedShiftScale",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),m=t(C.prototype,"damp",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),S=t(C.prototype,"rotateSpeed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=C))||v)||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/unlit-quad.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,o,n,a,s,p,u,l,c,d,h,y,f,b,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,n=e.createForOfIteratorHelperLoose,a=e.createClass},function(e){s=e.cclegacy,p=e._decorator,u=e.gfx,l=e.Vec3,c=e.SpriteFrame,d=e.Texture2D,h=e.Vec4,y=e.Material,f=e.utils,b=e.builtinResMgr,g=e.ModelComponent}],execute:function(){var m,v,_,w,x,O,S,M,P,C,D,T,F,A,N,k;s._RF.push({},"93929O83pBANKoOxC3c/52n","unlit-quad",void 0);var z=p.ccclass,B=p.property,R=null,j=null,L=null,U=null,E={effectName:"unlit",technique:0,defines:{USE_TEXTURE:!0},states:{rasterizerState:{cullMode:u.CullMode.NONE}}},H=[0,1,1,1,0,0,1,0],I={positions:[-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0],uvs:H,indices:[0,1,2,2,1,3],minPos:new l(-.5,-.5,0),maxPos:new l(.5,.5,0)},V={blendState:{targets:[{blend:!0,blendSrc:u.BlendFactor.SRC_ALPHA,blendDst:u.BlendFactor.ONE_MINUS_SRC_ALPHA,blendDstAlpha:u.BlendFactor.ONE_MINUS_SRC_ALPHA}]}},q={blendState:{targets:[{blend:!1}]}};e("UnlitQuadComponent",(m=z("UnlitQuadComponent"),v=B(c),_=B(d),w=B({type:d}),x=B({type:c}),O=B({override:!0,visible:!1}),S=B({override:!0,visible:!1}),M=B({override:!0,visible:!1}),P=B({override:!0,visible:!1}),C=B({override:!0,visible:!1}),m((F=t((T=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,i(o(t),"_sprite",F,o(t)),i(o(t),"_texture",A,o(t)),i(o(t),"_transparent",N,o(t)),i(o(t),"lightmapSettings",k,o(t)),t}r(t,e);var s=t.prototype;return s.onLoad=function(){U||((U=new y).initialize(E),R=f.createMesh(I),j=R.struct.vertexBundles[0].view,L=R.data.buffer.slice(j.offset,j.offset+j.length)),this.material=U,this._mesh=R,e.prototype.onLoad.call(this),this.updateTexture(),this.transparent=this._transparent},s.updateTexture=function(){var e=this.material&&this.material.passes[0],t=e&&e.getBinding("mainTexture");if("number"==typeof t){var r=this._sprite?this._sprite:this._texture?this._texture:b.get("grey-texture");e.bindTexture(t,r.getGFXTexture());var i=this.model&&this.model.subModels[0],o=i&&i.inputAssembler;if(o){var a=H;this._sprite&&(this._sprite._calculateUV(),a=this._sprite.uv);for(var s,p=0,l=u.Format.UNKNOWN,c=n(o.attributes);!(s=c()).done;){var d=s.value;if(d.name===u.AttributeName.ATTR_TEX_COORD){l=d.format;break}p+=u.FormatInfos[d.format].size}var h=o.vertexBuffers[0];f.writeBuffer(new DataView(L),a,l,p,h.stride),h.update(L)}}},a(t,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture=e,this.updateTexture()}},{key:"spriteFrame",get:function(){return this._sprite},set:function(e){this._sprite=e,this.updateTexture()}},{key:"transparent",get:function(){return this._transparent},set:function(e){this._transparent=e,this.material.overridePipelineStates(e?V:q)}},{key:"sharedMaterials",get:function(){return e.prototype.sharedMaterials},set:function(e){this.sharedMaterials=e}},{key:"mesh",get:function(){return e.prototype.mesh},set:function(e){this.mesh=e}},{key:"shadowCastingMode",get:function(){return e.prototype.shadowCastingMode},set:function(e){this.shadowCastingMode=e}},{key:"receiveShadow",get:function(){return e.prototype.receiveShadow},set:function(e){this.receiveShadow=e}}]),t}(g)).prototype,"_sprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(T.prototype,"_texture",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(T.prototype,"texture",[w],Object.getOwnPropertyDescriptor(T.prototype,"texture"),T.prototype),t(T.prototype,"spriteFrame",[x],Object.getOwnPropertyDescriptor(T.prototype,"spriteFrame"),T.prototype),N=t(T.prototype,"_transparent",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(T.prototype,"transparent",[B],Object.getOwnPropertyDescriptor(T.prototype,"transparent"),T.prototype),t(T.prototype,"sharedMaterials",[O],Object.getOwnPropertyDescriptor(T.prototype,"sharedMaterials"),T.prototype),t(T.prototype,"mesh",[S],Object.getOwnPropertyDescriptor(T.prototype,"mesh"),T.prototype),t(T.prototype,"shadowCastingMode",[M],Object.getOwnPropertyDescriptor(T.prototype,"shadowCastingMode"),T.prototype),t(T.prototype,"receiveShadow",[P],Object.getOwnPropertyDescriptor(T.prototype,"receiveShadow"),T.prototype),k=t(T.prototype,"lightmapSettings",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{texture:null,uvParam:new h,bakeable:!1,castShadow:!1,receiveShadow:!1,lightmapSize:64}}}),D=T))||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./ContactPointHelper.ts","./RigidCharacter.ts","./RigidCharacterTest.ts","./AxisHelper.ts","./StairsGenerator.ts","./first-person-camera.ts","./unlit-quad.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});